<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eGallon</title>

    <!-- START CSS ******************************************** -->

    <!-- Odometer -->
    <link rel="stylesheet" href="odometer-theme-car.css"/>

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <!-- Custom -->
    <link rel="stylesheet" href="style.css"/>

    <!-- END CSS ******************************************** -->
</head>

<body>
    <header>
        <img src="gridlogo.png">
    </header>

    <h2 class="roboto-light-grid">Compare the Costs of Driving With Electricity</h2>
    <h2 class="roboto-regular">The eGallon</h2>

    <div class="container">
        <div id="Gasoline-Container">
            <div id="odometerGas" class="odometer">0</div>
            <h4 class="roboto-light">CA regular gasoline ($/gallon)</h4>
        </div>
        <div id="Electric-Container">
            <div id="odometerElectric" class="odometer">0</div>
            <h4 class="roboto-light">electric eGallon</h4>
        </div>
    </div>

    <footer><span class="roboto-regular">The eGallon was first conceived by the Department of Energy. The e-gallon represents the cost of driving an electric vehicle (EV) the same distance a gasoline powered vehicle could travel on one (1) gallon of gasoline. This tool is only intended to provide an estimate of potential savings, actual results will vary. Gasoline rates change periodically, this tool uses data from the U.S. Energy Information Administration. Learn about the eGallon methodology at <a href="https://www.energy.gov/articles/egallon-methodology">https://www.energy.gov/articles/egallon-methodology.</a></span></footer>

    <!-- START JS ******************************************** -->

    <script src="odometer.js"></script>

    <script>
        /*
        const odometerGas = new Odometer({ el: document.getElementById('odometerGas') });
        const odometerElectric = new Odometer({ el: document.getElementById('odometerElectric') });

        odometerGas.update(1.23);
        odometerElectric.update(5.67);
        */
    </script>

      <!-- API Fetch -->
    <script>
    // Add this function to fetch gasoline prices
async function fetchGasolinePrices() {
    try {
        // Replace 'YOUR_API_KEY' with your actual EIA API key
        const response = await fetch('https://api.eia.gov/series/?api_key=ABFJ3GwbpgUCNVDoRZR2V7PXInOhoLjaEqKfbAaA&series_id=PET.EMM_EPMR_PTE_NUS_DPG.W');
        const data = await response.json();
        const gasolinePrice = data.series[0].data[0][1]; // Extract the most recent gasoline price
        return gasolinePrice;
    } catch (error) {
        console.error("Error fetching gasoline prices:", error);
        return 0; // Default value in case of an error
    }
}

// Initialize odometers and update with fetched values
async function updateOdometers() {
    const gasolinePrice = await fetchGasolinePrices();
    const electricPrice = 1.00; // Placeholder for the electric price (can be fetched similarly if needed)

    // Update odometers with fetched data
    const odometerGas = new Odometer({ el: document.getElementById('odometerGas') });
    const odometerElectric = new Odometer({ el: document.getElementById('odometerElectric') });

    odometerGas.update(gasolinePrice);
    odometerElectric.update(electricPrice); // Update electric price if dynamically fetched
}

// Call the function to update odometers after the DOM is fully loaded
document.addEventListener("DOMContentLoaded", updateOdometers);

</script>

    <!-- END JS ******************************************** -->

</body>
</html>
