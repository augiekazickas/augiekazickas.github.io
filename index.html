<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eGallon</title>

    <!-- START CSS ******************************************** -->

    <!-- Odometer -->
    <link rel="stylesheet" href="odometer-theme-car.css"/>

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <!-- Custom -->
    <link rel="stylesheet" href="style.css"/>

    <!-- END CSS ******************************************** -->
</head>

<body>
    <header>
        <img src="gridlogo.png">
    </header>

    <h2 class="roboto-light-grid">Compare the Costs of Driving With Electricity</h2>
    <h2 class="roboto-regular">The eGallon</h2>

    <div class="container">
        <div id="Gasoline-Container">
            <div id="odometerGas" class="odometer">0</div>
            <h4 class="roboto-light">CA regular gasoline ($/gallon)</h4>
        </div>
        <div id="Electric-Container">
            <div id="odometerElectric" class="odometer">0</div>
            <h4 class="roboto-light">electric eGallon</h4>
        </div>
    </div>

    <footer><span class="roboto-regular">The eGallon was first conceived by the Department of Energy. The e-gallon represents the cost of driving an electric vehicle (EV) the same distance a gasoline powered vehicle could travel on one (1) gallon of gasoline. This tool is only intended to provide an estimate of potential savings, actual results will vary. Gasoline rates change periodically, this tool uses data from the U.S. Energy Information Administration. Learn about the eGallon methodology at <a href="https://www.energy.gov/articles/egallon-methodology">https://www.energy.gov/articles/egallon-methodology.</a></span></footer>

    <!-- START JS ******************************************** -->

    <script src="odometer.js"></script>

    <script type="text/javascript">
        async function fetchElectricitySales() {
    try {
        const API_KEY = "ABFJ3GwbpgUCNVDoRZR2V7PXInOhoLjaEqKfbAaA"; // Replace with your actual API key
        const API_URL = `https://api.eia.gov/v2/petroleum/pri/gnd/data/?api_key=${API_KEY}&api_version=v2&data=%5B%22value%22%5D&facet_params=%7B%22duoarea%22:%5B%22SCA%22%5D,%22process%22:%5B%22PTE%22%5D,%22product%22:%5B%22EPMR%22%5D,%22series%22:%5B%22EMM_EPMR_PTE_SCA_DPG%22%5D%7D&freq=weekly`;

        // Fetch the data from the API
        const response = await fetch(API_URL);
        const data = await response.json();
        console.log("API Response:", data); // Log the complete response

        // Inspect the response structure
        if (data.response && data.response.data && Array.isArray(data.response.data) && data.response.data[0]) {
            const salesValue = data.response.data[0].value || 0; // Extract the first 'value' field
            return salesValue;
        } else {
            throw new Error("Sales data not found in the API response.");
        }
    } catch (error) {
        console.error("Error fetching electricity sales data:", error);
        return 0; // Default value in case of an error
    }
}

// Call and log the sales value for inspection
fetchElectricitySales().then(sales => {
    console.log("Electricity Sales Value:", sales);
});

    </script>

    <!-- END JS ******************************************** -->

</body>
</html>
